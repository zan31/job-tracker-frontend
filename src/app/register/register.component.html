<div class="container mt-5">
  <h2>Register</h2>

  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <form (ngSubmit)="createCompany ? createCompanyAndRegister() : onRegister()">
    <div class="mb-3">
      <label>Full Name</label>
      <input
        [(ngModel)]="fullName"
        name="fullName"
        class="form-control"
        required
      />
    </div>

    <div class="mb-3">
      <label>Email</label>
      <input [(ngModel)]="email" name="email" class="form-control" required />
    </div>

    <div class="mb-3">
      <label>Password</label>
      <input
        [(ngModel)]="password"
        name="password"
        type="password"
        class="form-control"
        required
      />
    </div>

    <div class="form-check mb-3">
      <input
        class="form-check-input"
        type="checkbox"
        id="recruiterCheck"
        [(ngModel)]="isRecruiter"
        name="isRecruiter"
      />
      <label class="form-check-label" for="recruiterCheck">
        Are you a recruiter?
      </label>
    </div>

    <div *ngIf="isRecruiter">
      <div class="form-check mb-3">
        <input
          class="form-check-input"
          type="checkbox"
          id="createCompany"
          [(ngModel)]="createCompany"
          name="createCompany"
        />
        <label class="form-check-label" for="createCompany">
          Create a new company?
        </label>
      </div>

      <div *ngIf="createCompany">
        <div class="mb-3">
          <label>Company Name</label>
          <input
            [(ngModel)]="newCompanyName"
            name="newCompanyName"
            class="form-control"
            required
          />
        </div>
        <div class="mb-3">
          <label>Website (optional)</label>
          <input
            [(ngModel)]="newCompanyWebsite"
            name="newCompanyWebsite"
            class="form-control"
          />
        </div>
        <div class="mb-3">
          <label>Description (optional)</label>
          <textarea
            [(ngModel)]="newCompanyDescription"
            name="newCompanyDescription"
            class="form-control"
          ></textarea>
        </div>
      </div>

      <div *ngIf="!createCompany">
        <label>Select Existing Company</label>
        <select
          class="form-select"
          [(ngModel)]="companyId"
          name="companyId"
          required
        >
          <option [ngValue]="null" disabled selected>
            -- Select a company --
          </option>
          <option *ngFor="let company of companies" [ngValue]="company.id">
            {{ company.name }}
          </option>
        </select>
      </div>
    </div>

    <button type="submit" class="btn btn-primary mt-3">Register</button>
  </form>
</div>
